# 설계 및 선언

## 인터페이스 설계는 제대로 쓰기엔 쉽게, 엉터리로 쓰기엔 어렵게
### 문제를 야기할 수 있는 인터페이스
- 날짜를 나타내는 `Date` 클래스에 넣을 생성자를 설계해본다.
- 아래 `Date` 클래스는 두가지 문제를 야기할 수 있다.
```cpp
class Date{
public:
    Date(int month, int day, int year);
}
```
1. 매개변수의 전달 순서가 잘못될 여지가 있다. 
    - `month : 3, day : 30`을 `month : 30, day : 3`으로 입력할 가능성이 있다.
2. 월과 일에 해당하는 숫자가 어이없는 숫자일 수 있다.
    - `day : 30` 을 `day : 50`으로 입력할 가능성이 있다.

### 해결방법
1. 일, 월, 연을 구분하는 간단한 랩퍼 타입을 만들고 이 타입을 `Date` 생성자 안에 들 수 있다.
2. **타입에 제약을 부여**하여 타입을 통해 할 수 있는 일들을 묶는다.

### 제대로 쓰기에 괜찮은 인터페이스
- 일관성 있는 인터페이스를 제공하기 위해서는 기본 제공 타입과 쓸데없이 어긋나는 동작을 피해야 한다.
- 괜찮은 인터페이스를 만들어 주는 요인중 하나는 **일관성**이다.
    - 모든 STL 컨테이너는 크기를 반환하는 `size`란 멤버 함수를 통해 일관성을 제공한다.
- 사용자 쪽에서 뭔가를 외워야 제대로 쓸 수 있는 인터페이스는 잘못 쓰기 쉽다.
    - 언제라도 잊어버릴 수 있다.

### 교차 DLL문제
- 객체 생성 시에 어떤 동적 링크 라이브러리의 `new`를 썻는데 그 객체를 삭제할 떄는 **이전의 DLL과 다른 DLL**에 있는 `delete`를 썼을경우 발생한다.
- `new/delete`가 실행되는 DLL이 달라서 꼬이게 되면 런타임 에러가 발생한다.

### 해결방법
- `shared_ptr`을 사용하면 문제를 피할 수 있다.
    - 클래스의 기본 삭제자는 `shared_ptr`이 생성된 DLL과 동일한 DLL에서 delete를 사용하도록 만들어져 있기 때문이다.
- `shared_ptr`은 다른 DLL들 사이에 이리저리 넘겨지더라도 교차 DLL 문제를 걱정하지 않아도 된다.

